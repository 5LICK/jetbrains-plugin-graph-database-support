apply plugin: "org.jetbrains.intellij"

dependencies {
    compile project(':language:cypher')
    compile project(':ui:jetbrains')
}

intellij {
    version intellijSdkVersion
    pluginName 'GraphDatabaseSupport'
    updateSinceUntilBuild false
    sameSinceUntilBuild false

    publish {
        pluginId '0000' // todo: add pluginId

        username System.getenv('IJ_REPO_USERNAME')
        password System.getenv('IJ_REPO_PASSWORD')
        channel System.getenv('IJ_REPO_CHANNEL') ?: 'graphdb-nightly'
    }

    if (System.getenv("CI_SERVER") == "yes") {
        downloadSources false
    } else {
        downloadSources true
    }
}

processResources {
    from 'platform/src/main/resources'
}
